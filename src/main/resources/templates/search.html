<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns:th="http://www.thymeleaf.org" lang="en">
<head>
<title>The Vitamin Shoppe Search</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
</head>
<body>
<div style="text-align:center"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAS0AAACnCAMAAABzYfrWAAABUFBMVEX///8VN37///7///z//f/8//////oUvvH///f5/////f7///gWN3z//fv8/v/9//wAJnVHXpEAJnoANHaCjq0ALXr/+v8AJGwAMn0AI2/k8PVPYo2uuMfEztwAF2+xvtSJmbd1hqMXNYIAJ2kAGWgALnQAIGYALHuls74AFGcAIHjw/f8buvSRnrgAuugWNoHn7/hDVYU0THwAKYQALW4TOXgACGDV2OUAIX5dapMALH9CWYETOnQAAGfi5uj6//DT8Paq5PKI1eNx0euY1ucuRICfrcODzOolv+ECuPs+xdnD7vMAI1vJ2uXm/v5ryOar6fJWveQzTHJxfJlPW3o1S3QyRme9ztdld52Uo7UAFV8AAHNqeKeNnKxug52Yp8gAAFEAAEAdRncAHVgAEXZ4i7Q4UIrP2NuFmL/CzeQFMmWqtr4AAFWKlq7g6+Zab5DZFwjcAAAO90lEQVR4nO2a61fbxrqHRzMaobuMjbAkbIzlG1jGksHCwTgkaYIPaeN075BsDKdJ90kLlKTU//+3845kg9Imu/2w16JrZZ5FjGPNjGZ+895GGCEOh8PhcDgcDofD4XA4HA6Hw+FwOBwOh8PhcDgcDofD4XA4HA6Hw+FwOBwOh8PhcDgcDofD4XA4HA6Hw+FwOBzOVwG+7wn8jVAPo8g7jDxAQZKsmSKykJpee4RXLUvTgsdPvnn69JtnTx4rq4a8er/zvVdUdFMf5oq5fD7XOJqNI0QMIqkqSS6CWBp6/D/Hx93O8+edTqf77XfIIvc843sFBy90Pdb1QhzHjZy74iGNiFhLrq0qFnp23F3qdJa63eNu9/mSR1ele57wPbOd80M/QfB9+8OEYhGnkmiy+bS7BHTZK9jWM0kRv2ZPREgO+jHYVkooCPUyleaRHSyLGRaY1lKX/Ry/tETVvOf53i8E/ZgrgEoAyAWv9oSoSnLJeAxigWEx0+osdbpPVCoayj3P936hmjKaq5XivzdVK7mEv+8cg0wp3c5xgE2kqvc83/vFENFmPitW3KgiMbn0+Liz1J2Lddzp/IM56NctFqglK0dZtUZ+/SrV5FlGre7SPxXjnqf6N0CFoF4qZuQSQmeWXvpnt3Prh0vd7/DXblgMC/xux9EXWsW+oNcnIIylHC+0Ymp9H1BRxZimkYu9qKyKJUm1SohKkpI21VNVJXx7YlIJxnOZoRkiGBJL8oIIjKCyN6wpxijr59AprYOhHIaxMIwisY8w65vcFRNLypbKhLB2CKofNiibgMoaScnn7AYG6wVTYKPAzhP4LywI7q+md4duyT0JSRcFyyPJRGCgzPEPo3J+pPt3od5ZQ1h89LKbyLQwLZViLBl3BQTVVJUNYkoiVGbwxlCoKN5eVqWFWOwSVmmaOVQLPqewEvnu/iqhqkgsSCGr1EpHMH9DhmwiRRQ1JSLI0ETW3pJhbxVYo2VRZCTDwMt8ETJBkRcgrKmrIrvnqmxSJgS0pDQRC6EgoMiUZZUwE5n3lFRRJfJcd9CfavJiTJDKxMgyRDW7LSo6aIVxJjHWJ5Jhvewu3fEUQaYkWEQ3vd7lZQ944xF0+qp3wkyEnO4czBAlkvJ6bXl5eW22dhCRuaWU3vTeBNBGQoNXB/8aUOX61cE7mP3NzkEv4V8KTJEY9FUJiRZNO129iGQDpFBF+noMZzENKdDcM0QN6WPYShEEOOntlNHCvDChpV6jFs9OqUkktP3mzdhS4M34cucMUYrBwKKVXqz3VjyqgVJwZY0xrSgU7Ha1twz/md1ESIY1nsH7ZfbBJhpsbpsaUT99tHC67o8yatn7SBYzanW6L4lpWEQV0X6LtdMFvwhqldxWD1lgwuW2sANboSl7dsEeOsLuljf3K+w1h8UxEkUJTYf2DjW0Snu4TDGa7uoFIRTC3fMAq4qGyvUDxbDm2/rxfzcSzzBQee8CgfWqwc9O0UNgYo3mBpLhNIuOdnMlrM2tGQSqO449HDZPwDjQD44NAyAZvc3vriAJg0+d1ewYyu/+izGC2xhow3Vatm+3X3tUwsG54DQcu1WsgBOjd7ZT8FtOYfctKo1/LGnSp3WThJYbcTbS18uaqNyp1f3GsmCHmG3N9tx+LPjN+p6HWXo4mKsVXoLDS0rd1936Vtv9dzQf2kArQz9WVg3iNf18CRzs2vWX4cLJ1k+10Hfc8/8LCDI1tOy4ZQxGlvTa2G1EogHuTHvDS+YsorKu9xO13uvtDaSBIjt+v4RJqpYoeed+4WAW5+tnVJLQD4XGBhLBJN82WjdI1gy63RTCluvmhv7WBnpEQK1G3HCbtbBxQiUS/CT49boLYg9A4ncN33brzeYeqLW5cvh728Jo0vT120gv6PYyRL/bynSp+xIKDdhqyVI8zztrtJY9L4IoUsr5PcSiw2nbuUQKxsp5WLweDAaTgZmGSiRp3k9xrgRzWGmAahCMrmvCMugAA1Vqwgx+mYSKZFJn4XIR3vZH9gmYhEhKrhArhFCi/Oz3wZplBOVOscoMd0cAS5BSYxTJac4H6w5uZlQFD/jBaW0g6IXethorzMjLzdDpb19PtsErmqegLvklb1940XZx2PQIAdvqT7zJjt+4gYW/s+2VCSxi4qnioYd/F7eQaqCZk/FEHYwL02+eQ03aOe52lp7BDck8dSCoZmFdzGpwKSf0kgHKRf8SWaKkbAm1xKq0hU9BWqg2QEo1KIbFbQSeU24XltM8WM4X9tPNktG0EYaQi0FNDYa5FAr5AaSR4CjWweUJRcq6YINaFjry42G+qlhgW7kKnh87RHRa9+OIymxYCqMN8+Cv4DNnLXuFZZxlxx95rOXh+90C2yy00bIv0CN6GbevQeW63od5lxpsx1B12DhLt1qE1MYqp09syzTwpOhn1YJe0nedJGQtPT9+mTFDldX+a7A7BiKlXKE3YPxow84Splb84jo1LZpKS7ERNcN6GZ0V/ZoJ2RiXHzC1Eo3bqVpwto9cocEKPUmFUCR5NT9u7cM9xsVQAAeFrQVPBLUwU2vk+7WZgnZCt0JUK7mLKgXQZXQWIUNiCWXqOBeTCdhHtQ9qYRgwhCjAGsJN9bYHOm7YENpQFMfrA4KCrbgfwL46rWmiVv+CrSrCkkL/+OyYQo44cTJq6WGzjIPu8y47Vy89yTrtQi2SqBULbtHN5cAw5mpB+G8/qO8NFj4CSqBZq7GsjPTdbYmVWp9TC1VbwlQXcgNVw2Cig6Yf+/kyUnQo/2wIywu1mG0JozU7bMzA/nK3aoE5Vc4LYa5/E7AgB4vR42YbaPmgFpLAEYdKGqqDWGiXE7WE3ruTIyE8CmQMaoXTd2uNYR0SM6il224uvwcRz/psSS6RqPZpQX9ACbji0vHz7rcBvWv4e7VC27Zbtn6rlq7HglOoDyBqpB1UjQzqurth6/XoEbO4z6kV9f2aV20Mq0gmWNUqRf9IH/boRlGIdbuKPrEtwZ2sgCXuX+oZtTQJld/bvl88iEyIW9NhqDvDRqFQ0BO1rsFGtfTkphzpC7XCRmsYnkPwk4JzfWgPd/3cWmAx24qFvuC4TK3PPEaA8Gygqi1kfRHS/svEspb+IWYe0yRq6YlaKlPr6GI6nVb3BaggjNS21vb3Z68jTNP7QHsIin6c1+130ImKn1UL3OIdOiwKRTB+1ZB+sfPbO37tx5HujG3/AOL9nVqX/oMrNC2Gjq7feSJmYdSs7DQEd6pAPjpxwl715ORkepna1mQdwl96K68Vbw1StZyiW38PY4haUI/9Wr794l1gSUytwuVsNlv7CA7yWbWopULomD/iStQS4kh7yg6KxyoVM20J2my3IMpL2ISc6Byk63YLOywzKVt+OivVmod5dryBlAlHhXUoANjZp9x2FmrlQC022UgPnV8qFfCtGwqFHd5vPbgu1YSWPqwG9XAUQChXfg5zEZ6rhek0H+p6viLNo7wE9Zy8ipRZy1/3mFoNFpSAM5vFLS0oCJAbsbgK5XVOL5hEhijfWiuXBwqS4SABntiolMseFHlwmqju1tIor95W/H9kxQa7z5SoU/Sy0+nCcfoTtSS0WWRHIzi2oY9F2HgDfA6yG6glScq5DzmRbTfJHm3QgR3DcIl6uJz352pdu6CWBgX62B2NoFaE7P7Bk6hML/XmgO4M4zgXmbFei2C/mW1F7KR4pINtETqzQ71dkVCa28HLrk7hdyUnbLHWU6YWRlBvDYdMLcjLYW1bQZJyVhTAtSUN6i1nipJTJ6DU44Xtgfy3OTFzsvoDnuuPhExmzFfQs27nW2qKmS5QbGz2C5BnJctAH92FWm2oIIgmBc2wvz0ejzfPTCJmbPi0GbpX86Kl7M7VksptODSwXqOhXmy33VrDL55hS/Ma+gePVNpCH0JWz6lfyyxuxQ04Tc3VWpWUaS5uV9BcLSTTtfpaqdQT4poJ+QXUgsIBduyt3UrUij4IYfFoWt3J+8KHCGIu2ugXpszYU7W29OLhXHio5Vv6D5tsFVf4k1VkwWQj94lafv2UHncea6skKzDYVn7I4haU0R9zWbUg2QbnoW7ncnZ+L6JaNvfu7EJJktpZOTdXi1y3h/ss51Ty4asJS9njnH+kiGiyvnukaEqvBdU7mtr5MZxNoDodeolawoMrE0xbmdn5W7WgOn246+RACvcMYZpWp2yhb1m9RcH0yn1H0BuOEzovwDQhym0Mh0yt1JODu7hGk5zYgkzf+vkGXPxLj6mkqB9mCnqgOH7yFBmYZktZUGuvfcDUMtHHLfdVqtbD4hGcgZHybygn2F8nf43mVXmKWPr1epGLy3tuWtLi8l7zNUQKOnL3SixGSHTH3duE8ndv/YDJ+pCV4dvn7gnspPLQ3fKY441qD68gAqmyMnsIvdItoepqtVi087mfVhQWa6bN+kqq1nmzCkEU/CuaNR/Y/eL6/gSWABXTxlZ9hlYXav3a3zqkC7VO1mtsDTlQS/vin+pFtN0WMsdFEK7V/81clVUt24wcbo7LRCXEkA5LpVNqEISj8WYFQzQwN0ulEvzb3GQPcu5QgxVkJU97VHI4HpdT3Q/HpTKRsAU9TFmjVJYGMCCSD8ebp3RVVbajRwZijaCm1cabJYWpVSqNfxNFTCCmXwzwXK1HcDevtHExPgRrMBU0KI0HMiZa8gZSgckeeE3OLi7GVxCZJPYQ62pzsywtbMscl0pmukqLSOUxWwas4gqi85fUoiQYhdnzjx9DIuF8HvbQx806ou73vfue1N8WKIg/+YOGMGpv8GfxX0ZCpcz5JyxAgWr9ea+vE0NRICvdHa7D/BlSuVpfAOoUgirFMNSF0PdD3R+ZSPzzbl8z9KCgxzH7EXJj9FV/W+uvUK6xw/VopPvvA/z5xzucBSI6cNh3uQRhvQTFNeZfO/1PmDj64EDM8ptVRSJfPIFzEqhGvNmLej0eK3Cm+dzDME4GAqcobzIJkMWd8C8gSaapSUT94rMKzi3s+ymgFJfqL8G+lUIkSZPlR9wT/xRRpTSpG1RexnM4HA6Hw+FwOBwOh8PhcDgcDofD4XA4HA6Hw+FwOBwOh8PhcDgcDofD4XA4HA6Hw+FwOBwOh8PhcDgcDofz3+L/Aeh1xr2aizcYAAAAAElFTkSuQmCC" data-deferred="1" class="rg_i Q4LuWd" jsname="Q4LuWd" width="301" height="168" alt="The Vitamin Shoppe promotes Day Gooch to quality, commercialization role" data-iml="986.4000000059605" data-atf="true"></img></div>
<div class="card mb-3" style="max-width: 540px;border:0px;margin-left:376px;margin-top:30px;">
<p class="text-info"><b>SearchTVS<sup>TM </sup></b> </p>
<span class="border-info">
	<div class="input-group mb-3">
	  <input type="text" class="form-control" placeholder="Search TVS" aria-label="Product Name" aria-describedby="btnNameSearch" id="productNamedesc">
	  <div class="input-group-append">
	    <button class="btn btn-outline-secondary" type="button" id="btnNameSearch">Search</button>
	  </div>
	</div>
</span>
</div>

<div id="results" class="card" style="border:0px;margin-left:30px;"></div>


<script src="https://code.jquery.com/jquery-3.5.1.min.js"   integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="   crossorigin="anonymous"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
<script th:inline="javascript">
    $(document).ready(function() {
        $('#productNamedesc').autocomplete({
	           source: function (request, response){
	               $.get("http://localhost:8080/suggestions?",{q : request.term},function(data, status){
	                  $("#results").html("");
	                  if(status=='success'){
	                    response(data);
	                  }
	               });
	           }
           }
        );
    
        $("#btnNameSearch").click(function(){
          var inputText = $("#productNamedesc").val();
          var skus = [];
          var stores=[];
          var employees=[];
          if(inputText.length == 0) {
             alert("Enter  name or description");
          }else{
             var response = '';
	         $.ajax({
	            type: "GET",
	            url: "http://localhost:8080/products?q="+inputText,
	            async: true,
	            success: function(resp) {
	                var len = resp.length;
	                var skuHtml = "";
					var storesHtml = "";      
					var employeesHtml = "";      
                    if(len == 0) {
                      $("#results").html("<p class='text-danger'>Zero matches</p>");
                    }else{
                       strHTML = "<p class='text-success'>"+len + " matches found.</p>";
                      // strHTML += "<ul class='list-unstyled'>";
                       for(var i=0; i<len; i++){   
	                      if(resp[i].sku_id != null){
	                      skuHtml += "<li>"+resp[i].sku_id+" "+resp[i].sku_description+"</li>";
	                      skus.push(skuHtml);
	                      }  
	                      else if (resp[i].first_name!=null && resp[i].first_name.toLowerCase() == "store"){
		alert('store'+resp[i].store);
	                      	var docId=resp[i].store;
	                         storesHtml += "<li><a href=\"javascript:storeDetails('"+docId+"');\">"+resp[i].full_name+" ,"+resp[i].city+","+resp[i].state_province+" <b>Store email:</b> "+resp[i].email_address+"</a></li>";
	                       //  storesHtml += "<li>"+resp[i].full_name+"</li>";
	                          stores.push(storesHtml);
	                        
	                      } else {             
	                         employeesHtml += "<li>"+resp[i].full_name+" "+resp[i].email_address+"</li>";
	                        //  employeesHtml += "<li>"+resp[i].first_name+"</li>";
	                          //employeesHtml += "<li>"+resp[i].last_name+"</li>";
	                          employees.push(employeesHtml);
	                         }
	                         
                       }
                       var skusHeader;
                       var  storesHeader;
                       var employeesHeader;
                       if(skus!= null && skus.length>0){
						skusHeader="<p style=\"color:blue\"><b> Products: "+skus.length+"</b></p>"
						skusHeader += "<ul class='list-unstyled'>";
						skusHeader = skusHeader+skuHtml + "</ul>";
					  }
					   if(stores!=null && stores.length>0){
						storesHeader="<p style=\"color:blue\"><b> VSI Stores: "+stores.length+"</b></p>"
						storesHeader += "<ul class='list-unstyled'>";
						storesHeader = storesHeader+storesHtml + "</ul>";
					  }
					  if(employees!=null && employees.length>0){
						employeesHeader="<p style=\"color:blue\"><b> Employees: "+employees.length+"</b></p>"
						employeesHeader += "<ul class='list-unstyled'>";
						employeesHeader =employeesHeader+ employeesHtml + "</ul>";
					  }
                      // strHTML = strHTML + "</ul>";
                      var finalHTML=strHTML;
                      if(skusHeader!=null){
							finalHTML+=skusHeader;
						}
						if(storesHeader!=null){
							finalHTML+=storesHeader;
						}
						if(employeesHeader!=null){
							finalHTML+=employeesHeader;
						}
                       $("#results").html(finalHTML)
                    }
	            }
	        });           
          }
        });
    });
    
    function storeDetails(respId){
	alert('hello2');
	alert('hello'+respId);
	/*$.ajax({
	            type: "GET",
	            url: "http://localhost:8080/searchResultStore?q="+respId,
	            async: true,
	            success: function(resp) {
	                var len = resp.length;
	                var skuHtml = "";
					var storesHtml = "";      
					var employeesHtml = "";      
                    if(len == 0) {
                      alert('no resp');
                      window.location.href='searchResultStore.html';
                    }else{
                      // strHTML = "<p class='text-success'>"+len + " matches found.</p>";
                      // strHTML += "<ul class='list-unstyled'>";
                     
                      // strHTML = strHTML + "</ul>";
                    alert('some resp'+resp);
                    }
	            }
	        });     */      
          window.location.href="http://localhost:8080/searchResultStore?q="+respId;
}
</script>

</body>
</html>